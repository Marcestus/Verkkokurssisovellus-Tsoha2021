{% extends "layout.html" %}
{% block title %}{{ course[1] }}{% endblock %}
{% block content %}

{% if session.user_id %}
    {% if session.usertype == 1 %}

        <h1>{{course[1]}}</h1>
        <p>Läpipääsyraja: {{course[3]}}</p>

        <form action="/update_passgrade" method="post">
            Muokkaa läpipääsyrajaa: <input type="number" name="passgrade" min="1" max="100">
            <input type="submit" value="Päivitä raja"> <br>
            Huom, läpipääsyrajan tulee olla välillä 1-100!
            <p>
            <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
            <input type="hidden" name="course_id" value="{{ course[0] }}">
        </form>

        <p style="white-space: pre-line">{{ course[4] }}</p>
        <a href="/update_intro/{{ course[0] }}">Muokkaa</a>

        <hr>

        {% if not slot_add_ok %}
        
            <p>Osioiden maksimimäärä saavutettu! Poista osio, jos haluat lisätä uuden</p>
                
        {% endif %}

        <hr>

        {% if no_material %}

            <p><a href="/modify_coursematerial_order/{{ course[0] }}/0/add_first">Lisää uusi osio</a></p>
        
        {% else %}

            {% for material in coursematerial %}
                {% if slot_add_ok %}

                    <p><a href="/modify_coursematerial_order/{{ course[0] }}/{{ material[0] }}/add_middle">Lisää uusi osio</a></p>
                    
                    <hr>

                {% endif %}

                <p style="white-space: pre-line">{{ material[1] }}</p>
                <p style="white-space: pre-line">{{ material[2] }}</p>
                <a href="/update_material/{{ course[0] }}/{{ material[0] }}">Muokkaa</a>
                <a href="/modify_coursematerial_order/{{ course[0] }}/{{ material[0] }}/delete">Poista</a>
                <p>

                <hr>
            {% endfor %}
            
            {% if slot_add_ok %}

                <p><a href="/modify_coursematerial_order/{{ course[0] }}/0/add_last">Lisää uusi osio</a></p>

                <hr>

            {% endif %}

        {% endif %}

        Ja tänne tehtävät

    {% endif %}
    
    {% if session.usertype == 2 %}

        <h1>{{course[1]}}</h1>
        <p>Läpipääsyraja: {{course[3]}}</p>

        <hr>

        <p style="white-space: pre-line">{{ course[4] }}</p>

        <hr>

        {% for material in coursematerial %}
            <p style="white-space: pre-line">{{ material[1] }}</p>
            <p style="white-space: pre-line">{{ material[2] }}</p>
            <p>
            <hr>
        {% endfor %}

        Ja tänne tehtävät

    {% endif %}

    
{% else %}

    Et ole kirjautunut! <br>
    Joo tää pitää muuttaa järkevämmäksi

{% endif %}
{% endblock %}